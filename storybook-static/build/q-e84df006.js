import{_}from"./q-ff6eb6cb.js";import{m as j,j as k,h as m,q as B,G as C,H as M}from"./q-73c53bab.js";import"./q-787c0e56.js";var Q=Object.defineProperty,G=(e,t,i)=>t in e?Q(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,R=(e,t,i)=>(G(e,typeof t!="symbol"?t+"":t,i),i);class ye extends Error{constructor(t,i){super(typeof t=="string"?t:""),R(this,"name","FormError"),R(this,"errors"),this.errors=typeof t=="string"?i||{}:t}}function _e(e,t,i){const{checked:n,files:r,options:s,value:u,valueAsDate:o,valueAsNumber:f}=e;return!i||i==="string"?u:i==="string[]"?s?[...s].filter(a=>a.selected&&!a.disabled).map(a=>a.value):n?[...t.value||[],u]:(t.value||[]).filter(a=>a!==u):i==="number"?f:i==="boolean"?n:i==="File"&&r?j(r[0]):i==="File[]"&&r?[...r].map(a=>j(a)):i==="Date"&&o?o:t.value}function g(e){return[...Object.values(e.internal.fields),...Object.values(e.internal.fieldArrays)]}function E(e,t){return e.internal.fieldArrays[t]}function H(e,t){return+t.replace(`${e}.`,"").split(".")[0]}function L(e,t){$(e,!1).forEach(i=>{const n=E(e,i).items.length-1;t.filter(r=>r.startsWith(`${i}.`)&&H(i,r)>n).forEach(r=>{t.splice(t.indexOf(r),1)})})}function $(e,t=!0){const i=Object.keys(e.internal.fieldArrays);return t&&L(e,i),i}function X(e,t=!0){const i=Object.keys(e.internal.fields);return t&&L(e,i),i}function h(e,t){return e.internal.fields[t]}function D(e,t,i){const n=X(e,i),r=$(e,i);return typeof t=="string"||Array.isArray(t)?(typeof t=="string"?[t]:t).reduce((s,u)=>{const[o,f]=s;return r.includes(u)?(r.forEach(a=>{a.startsWith(u)&&f.add(a)}),n.forEach(a=>{a.startsWith(u)&&o.add(a)})):o.add(u),s},[new Set,new Set]).map(s=>[...s]):[n,r]}function Z(e,{items:t,initialItems:i,error:n}={items:[],initialItems:[],error:""}){const r=i.join()!==t.join();return{internal:{initialItems:[...i],startItems:[...i],validate:[],consumers:[]},name:e,items:t,error:n,active:!1,touched:r,dirty:r}}function q(e,t){const i=n=>n instanceof Blob?n.size:n;return Array.isArray(e)&&Array.isArray(t)?e.map(i).join()!==t.map(i).join():e instanceof Date&&t instanceof Date?e.getTime()!==t.getTime():Number.isNaN(e)&&Number.isNaN(t)?!1:e!==t}function K(e,{value:t,initialValue:i,error:n}={value:void 0,initialValue:void 0,error:""}){const r=q(i,t);return{internal:{initialValue:i,startValue:i,validate:[],transform:[],elements:[],consumers:[]},name:e,value:t,error:n,active:!1,touched:r,dirty:r}}function I(e,t){return e.split(".").reduce((i,n)=>i?.[n],t)}let U=0;function O(){return U++}function Y({loader:e,action:t,fieldArrays:i}){function n(o){return t?.value?.values&&I(o,t.value.values)}const r=()=>O(),s=o=>t?.value?.errors[o]||"",u=(o,f,a)=>Object.entries(f).reduce((p,[d,l])=>{const c=a?`${a}.${d}`:d;if(i?.includes(c.replace(/.\d+./g,".$."))){const y=l.map(r);p[1][c]=Z(c,{initialItems:y,items:n(c)?.map(r)||[...y],error:s(c)})}else(!l||typeof l!="object"||Array.isArray(l)||l instanceof Date)&&(p[0][c]=K(c,{initialValue:l,value:n(c)??l,error:s(c)}));return l&&typeof l=="object"&&u(p,l,c),p},o);return u([{},{}],e.value)}async function me(e,t){const i=await e.resolve();return(typeof i=="function"?i():i).safeParse(t)}function P(e,t){return(typeof e!="string"&&!Array.isArray(e)?e:t)||{}}function J(e,t){e.dirty=t||g(e).some(i=>i.active&&i.dirty)}function ee(e,t){const i=q(t.internal.startValue,t.value);i!==t.dirty&&(t.dirty=i,J(e,i))}function w(e,t){h(e,t)?.internal.elements[0]?.focus()}function te(e,t,i,{shouldActive:n=!0,shouldTouched:r=!1,shouldDirty:s=!1,shouldFocus:u=!!i}={}){for(const o of[h(e,t),E(e,t)])o&&(!n||o.active)&&(!r||o.touched)&&(!s||o.dirty)&&(o.error=i,i&&"value"in o&&u&&w(e,t));W(e,!!i)}function ie(e,t,i){const{shouldActive:n=!0,shouldTouched:r=!1,shouldDirty:s=!1,shouldValid:u=!1}=P(t,i);return D(e,t)[0].reduce((o,f)=>{const a=h(e,f);return(!n||a.active)&&(!r||a.touched)&&(!s||a.dirty)&&(!u||!a.error)&&(typeof t=="string"?f.replace(`${t}.`,""):f).split(".").reduce((p,d,l,c)=>p[d]=l===c.length-1?a.value:typeof p[d]=="object"&&p[d]||(isNaN(+c[l+1])?{}:[]),o),o},typeof t=="string"?[]:{})}function he(e,t,i){const[n,r]=D(e,t,!1),s=typeof t=="string"&&n.length===1,u=!s&&!Array.isArray(t),o=P(t,i),{initialValue:f,initialValues:a,keepResponse:p=!1,keepSubmitCount:d=!1,keepSubmitted:l=!1,keepValues:c=!1,keepDirtyValues:y=!1,keepItems:A=!1,keepDirtyItems:z=!1,keepErrors:N=!1,keepTouched:T=!1,keepDirty:S=!1}=o;n.forEach(F=>{const v=h(e,F);(s?"initialValue"in o:a)&&(v.internal.initialValue=s?f:I(F,a));const b=y&&v.dirty;!c&&!b&&(v.internal.startValue=v.internal.initialValue,v.value=v.internal.initialValue,v.internal.elements.forEach(V=>{V.type==="file"&&(V.value="")})),T||(v.touched=!1),!S&&!c&&!b&&(v.dirty=!1),N||(v.error="")}),r.forEach(F=>{const v=E(e,F),b=z&&v.dirty;!A&&!b&&(a&&(v.internal.initialItems=I(F,a)?.map(()=>O())||[]),v.internal.startItems=[...v.internal.initialItems],v.items=[...v.internal.initialItems]),T||(v.touched=!1),!S&&!A&&!b&&(v.dirty=!1),N||(v.error="")}),u&&(p||(e.response={}),d||(e.submitCount=0),l||(e.submitted=!1)),oe(e)}function re(e,t,{duration:i}={}){e.response=t,i&&setTimeout(()=>{e.response===t&&(e.response={})},i)}async function ne(e,t,i){const[n,r]=D(e,t),{shouldActive:s=!0,shouldFocus:u=!0}=P(t,i),o=O();e.internal.validators.push(o),e.validating=!0;const f=e.internal.validate?await e.internal.validate(ie(e,{shouldActive:s})):{};let a=typeof t!="string"&&!Array.isArray(t)?!Object.keys(f).length:!0;const[p]=await Promise.all([Promise.all(n.map(async d=>{const l=h(e,d);if(!s||l.active){let c;for(const A of l.internal.validate)if(c=await A(l.value),c)break;const y=c||f[d]||"";return y&&(a=!1),l.error=y,y?d:null}})),Promise.all(r.map(async d=>{const l=E(e,d);if(!s||l.active){let c="";for(const A of l.internal.validate)if(c=await A(l.items),c)break;const y=c||f[d]||"";y&&(a=!1),l.error=y}}))]);if(ae(e,f,{shouldActive:s}),u){const d=p.find(l=>l);d&&w(e,d)}return W(e,!a),e.internal.validators.splice(e.internal.validators.indexOf(o),1),e.internal.validators.length||(e.validating=!1),a}function se(e,t,i,{on:n,shouldFocus:r=!1}){n.includes((e.internal.validateOn==="submit"?e.submitted:t.error)?e.internal.revalidateOn:e.internal.validateOn)&&ne(e,i,{shouldFocus:r})}async function Ae(e,t,i,n,r,s,u){u!==void 0&&(t.value=u);for(const o of t.internal.transform)t.value=await o(t.value,n,r);t.touched=!0,e.touched=!0,ee(e,t),se(e,t,i,{on:s})}function ae(e,t,{duration:i,shouldActive:n=!0}){const r=Object.entries(t).reduce((s,[u,o])=>([h(e,u),E(e,u)].every(f=>!f||n&&!f.active)&&s.push(o),s),[]).join(" ");r&&re(e,{status:"error",message:r},{duration:i})}function Ee(e,t,i){Object.entries(t).forEach(([n,r])=>{r&&te(e,n,r,{...i,shouldFocus:!1})})}function W(e,t){e.invalid=t||g(e).some(i=>i.active&&i.error)}function oe(e){let t=!1,i=!1,n=!1;for(const r of g(e))if(r.active&&(r.touched&&(t=!0),r.dirty&&(i=!0),r.error&&(n=!0)),t&&i&&n)break;e.touched=t,e.dirty=i,e.invalid=n}const x=M(m(()=>_(()=>import("./q-8400fa2e.js"),["./q-8400fa2e.js","./q-73c53bab.js","./q-ff6eb6cb.js","./q-787c0e56.js"],import.meta.url),"s_vBVRkPF8kFE"));function le({children:e,name:t,type:i,...n}){const{of:r}=n,s=h(r,t);return k(x,{store:s,...n,children:e(s,{name:t,autoFocus:!1,ref:m(()=>_(()=>import("./q-221ca1bb.js"),["./q-221ca1bb.js","./q-73c53bab.js","./q-ff6eb6cb.js","./q-787c0e56.js"],import.meta.url),"s_0EFsQ07yXsM",[s]),onInput$:m(()=>_(()=>import("./q-221ca1bb.js"),["./q-221ca1bb.js","./q-73c53bab.js","./q-ff6eb6cb.js","./q-787c0e56.js"],import.meta.url),"s_WQShqIriXzI",[s,r,t,i]),onChange$:m(()=>_(()=>import("./q-221ca1bb.js"),["./q-221ca1bb.js","./q-73c53bab.js","./q-ff6eb6cb.js","./q-787c0e56.js"],import.meta.url),"s_vNtVq2dMPhY",[s,r,t]),onBlur$:m(()=>_(()=>import("./q-221ca1bb.js"),["./q-221ca1bb.js","./q-73c53bab.js","./q-ff6eb6cb.js","./q-787c0e56.js"],import.meta.url),"s_fzfym1ErEFI",[s,r,t])})},0,t)}function ue({children:e,name:t,...i}){const n=E(i.of,t);return k(x,{store:n,...i,children:e(n)},0,t)}function ce({of:e,action:t,onSubmit$:i,responseDuration:n,keepResponse:r,shouldActive:s,shouldTouched:u,shouldDirty:o,shouldFocus:f,reloadDocument:a,children:p,...d}){const{encType:l}=d,c={duration:n,shouldActive:s,shouldTouched:u,shouldDirty:o,shouldFocus:f};return B("form",{...d,action:t?.actionPath,children:p,onSubmit$:m(()=>_(()=>import("./q-acecbb61.js"),["./q-acecbb61.js","./q-73c53bab.js","./q-ff6eb6cb.js","./q-787c0e56.js"],import.meta.url),"s_qmKnyqz75p4",[t,l,e,r,i,c,a]),"preventdefault:submit":!a,ref:y=>{e.element=y}},{method:"post",noValidate:!0},0,"Qg_0")}function fe({validate:e,validateOn:t="submit",revalidateOn:i="input",...n}){return C(()=>{const[r,s]=Y(n);return{internal:{fields:r,fieldArrays:s,fieldArrayPaths:n.fieldArrays,validate:e,validators:[],validateOn:t,revalidateOn:i},element:void 0,submitCount:0,submitting:!1,submitted:!1,validating:!1,touched:!1,dirty:!1,invalid:!1,response:n.action?.value?.response||{}}})}function Fe(e){const t=fe(e);return[t,{Form:i=>ce({of:t,action:e.action,...i}),Field:i=>le({of:t,...i}),FieldArray:i=>ue({of:t,...i})}]}function be(e){return m(()=>_(()=>import("./q-f85391bc.js"),["./q-f85391bc.js","./q-73c53bab.js","./q-ff6eb6cb.js"],import.meta.url),"s_WNtBdMWIifo",[e])}function Ie(e,t){return m(()=>_(()=>import("./q-d93ebab8.js"),["./q-d93ebab8.js","./q-73c53bab.js","./q-ff6eb6cb.js"],import.meta.url),"s_8vMT3TABZIQ",[t,e])}function ge(e){return m(()=>_(()=>import("./q-f2f915a0.js"),["./q-f2f915a0.js","./q-73c53bab.js","./q-ff6eb6cb.js"],import.meta.url),"s_TD2dR9TvPOM",[e])}export{ye as F,re as a,ae as b,me as c,O as d,_e as e,Fe as f,ie as g,Ae as h,ge as i,be as j,Ie as m,he as r,Ee as s,oe as u,ne as v};
