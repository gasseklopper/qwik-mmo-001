import{c as G,L as Z,r as oe,m as ne,s as ae,U as re,e as se,G as T,w as ie,W as O,Z as v,l as le,j as ce,h as V,E as ue,f as de}from"./q-73c53bab.js";import{t as me,m as F,n as z,r as X,o as Y,q as K,v as J,w as pe,x as fe,y as ve,z as R,A as q,B as _e,E as ye,F as he,G as Se,e as Ce,f as Ee,C as we,D as ge,R as qe,h as be,i as Re,j as Le,k as De}from"./q-787c0e56.js";import*as i from"@qwik-city-plan";import{_ as W}from"./q-ff6eb6cb.js";const Ae=":root{view-transition-name:none}",Ie=async(_,a)=>{const[y,h,r,S]=G(),{type:l="link",forceReload:m=_===void 0,replaceState:C=!1,scroll:E=!0}=typeof a=="object"?a:{forceReload:a},c=r.value.dest,o=_===void 0?c:me(_,S.url);if(!F(o,c)){location.href=o.href;return}if(!m&&z(o,c)){l==="link"&&o.href!==location.href&&history.pushState(null,"",o),X(l,o,new URL(location.href),Y()),l==="popstate"&&(window._qCityScrollEnabled=!0);return}return r.value={type:l,dest:o,forceReload:m,replaceState:C,scroll:E},K(o,Z()),J(i.routes,i.menus,i.cacheModules,o.pathname),y.value=void 0,S.isNavigating=!0,new Promise(w=>{h.r=w})},Pe=({track:_})=>{const[a,y,h,r,S,l,m,C,E,c,o]=G();async function w(){const[d,b]=_(()=>[c.value,a.value]),$=oe(""),L=o.url,p=b?"form":d.type,ee=d.replaceState;let n,H,x=null,D;{n=new URL(d.dest,location),n.pathname.endsWith("/")?i.trailingSlash||(n.pathname=n.pathname.slice(0,-1)):i.trailingSlash&&(n.pathname+="/");let A=J(i.routes,i.menus,i.cacheModules,n.pathname);D=Z();const I=H=await K(n,D,!0,b);if(!I){c.untrackedValue={type:p,dest:n};return}const j=I.href,P=new URL(j,n);pe(P,n)||(n=P,A=J(i.routes,i.menus,i.cacheModules,n.pathname)),x=await A}if(x){const[A,I,j,P]=x,k=j,te=k[k.length-1];o.prevUrl=L,o.url=n,o.params={...I},c.untrackedValue={type:p,dest:n};const g=fe(H,o,k,$);y.headings=te.headings,y.menu=P,h.value=ne(k),r.links=g.links,r.meta=g.meta,r.styles=g.styles,r.scripts=g.scripts,r.title=g.title,r.frontmatter=g.frontmatter;{E.viewTransition!==!1&&(document.__q_view_transition__=!0);let Q;p==="popstate"&&(Q=Y()),d.scroll&&(!d.forceReload||!z(n,L))&&(p==="link"||p==="popstate")&&(document.__q_scroll_restore__=()=>X(p,n,L,Q));const B=H?.loaders,e=window;if(B&&Object.assign(m,B),ve.clear(),!e._qCitySPA){if(e._qCitySPA=!0,history.scrollRestoration="manual",e.addEventListener("popstate",()=>{e._qCityScrollEnabled=!1,clearTimeout(e._qCityScrollDebounce),l(location.href,{type:"popstate"})}),e.removeEventListener("popstate",e._qCityInitPopstate),e._qCityInitPopstate=void 0,!e._qCityHistoryPatch){e._qCityHistoryPatch=!0;const s=history.pushState,f=history.replaceState,U=t=>(t===null||typeof t>"u"?t={}:t?.constructor!==Object&&(t={_data:t}),t._qCityScroll=t._qCityScroll||q(document.documentElement),t);history.pushState=(t,u,M)=>(t=U(t),s.call(history,t,u,M)),history.replaceState=(t,u,M)=>(t=U(t),f.call(history,t,u,M))}document.body.addEventListener("click",s=>{if(s.defaultPrevented)return;const f=s.target.closest("a[href]");if(f&&!f.hasAttribute("preventdefault:click")){const U=f.getAttribute("href"),t=new URL(location.href),u=new URL(U,t);if(F(u,t)&&z(u,t)){if(s.preventDefault(),!u.hash&&!u.href.endsWith("#")){u.href!==t.href&&history.pushState(null,"",u),e._qCityScrollEnabled=!1,clearTimeout(e._qCityScrollDebounce),R({...q(document.documentElement),x:0,y:0}),location.reload();return}l(f.getAttribute("href"))}}}),document.body.removeEventListener("click",e._qCityInitAnchors),e._qCityInitAnchors=void 0,window.navigation||(document.addEventListener("visibilitychange",()=>{if(e._qCityScrollEnabled&&document.visibilityState==="hidden"){const s=q(document.documentElement);R(s)}},{passive:!0}),document.removeEventListener("visibilitychange",e._qCityInitVisibility),e._qCityInitVisibility=void 0),e.addEventListener("scroll",()=>{e._qCityScrollEnabled&&(clearTimeout(e._qCityScrollDebounce),e._qCityScrollDebounce=setTimeout(()=>{const s=q(document.documentElement);R(s),e._qCityScrollDebounce=void 0},200))},{passive:!0}),removeEventListener("scroll",e._qCityInitScroll),e._qCityInitScroll=void 0,e._qCityBootstrap?.remove(),e._qCityBootstrap=void 0,_e.resolve()}if(p!=="popstate"){e._qCityScrollEnabled=!1,clearTimeout(e._qCityScrollDebounce);const s=q(document.documentElement);R(s)}ye(window,p,L,n,ee),ae(D).then(()=>{he(D).setAttribute("q:route",A);const f=q(document.documentElement);R(f),e._qCityScrollEnabled=!0,o.isNavigating=!1,C.r?.()})}}}w()},ke=_=>{re(V(()=>W(()=>Promise.resolve().then(()=>N),void 0,import.meta.url),"s_RPDJAz33WLA"));const a=Se();if(!a?.params)throw new Error("Missing Qwik City Env Data");const y=se("url");if(!y)throw new Error("Missing Qwik URL Env Data");const h=new URL(y),r=T({url:h,params:a.params,isNavigating:!1,prevUrl:void 0},{deep:!1}),S={},l=ie(T(a.response.loaders,{deep:!1})),m=O({type:"initial",dest:h,forceReload:!1,replaceState:!1,scroll:!0}),C=T(Ce),E=T({headings:void 0,menu:void 0}),c=O(),o=a.response.action,w=o?a.response.loaders[o]:void 0,d=O(w?{id:o,data:a.response.formData,output:{result:w,status:a.response.status}}:void 0),b=V(()=>W(()=>Promise.resolve().then(()=>N),void 0,import.meta.url),"s_fX0bDjeJa0E",[d,S,m,r]);return v(Ee,E),v(we,c),v(ge,C),v(qe,r),v(be,b),v(Re,l),v(Le,d),v(De,m),le(V(()=>W(()=>Promise.resolve().then(()=>N),void 0,import.meta.url),"s_02wMImzEAbk",[d,E,c,C,a,b,l,S,_,m,r])),ce(ue,null,3,"qY_0")},N=Object.freeze(Object.defineProperty({__proto__:null,_hW:de,s_02wMImzEAbk:Pe,s_RPDJAz33WLA:Ae,s_TxCFOy819ag:ke,s_fX0bDjeJa0E:Ie},Symbol.toStringTag,{value:"Module"}));export{de as _hW,Pe as s_02wMImzEAbk,Ae as s_RPDJAz33WLA,ke as s_TxCFOy819ag,Ie as s_fX0bDjeJa0E};
